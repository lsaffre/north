.. _north.tutorial.polls:

The North Polls tutorial 
=========================

This tutorial explains how North can be added to an 
existing Django site.

Before reading on, please follow the
`Django Polls tutorial
<https://docs.djangoproject.com/en/1.4/intro/tutorial01/>`_.

We are going to turn the resulting 
application into a North application.

Let's look together at the files under 
:file:`/docs/tutorials/polls` of the North code repository.
After the Django polls tutorial series,
we've added only a few minor things:

(1) In :file:`settings.py`,
a line at the beginning of the file to instantiate our :setting:`SITE`::
::

    import north; 
    SITE = north.Site(__file__,globals()) 
    
Then we add a "djangosite" entry to :setting:`INSTALLED_APPS`::

  INSTALLED_APPS = (
      ...
      'djangosite'
  )
  
Note that "'djangosite'" must be the **last entry** of your 
:setting:`INSTALLED_APPS`. That's because the only thing it does 
is to call :meth:`settings.SITE.startup <djangosite.Site.startup>`

And finally declare a local fixture directory::

  FIXTURE_DIRS = ['fixtures']


(2) A file :file:`polls/fixtures/demo.py`,
a simple example of a Python fixture providing 
demo data for our application:

.. literalinclude:: ../polls/fixtures/demo.py

You can now reset your database to factory defaults by issuing::

  python manage.py initdb demo
  
You can make a complete python backup like this::
  
  python manage.py dumpdata > fixtures/a.py
  
And restore it like this::

  python manage.py initdb a
 
Note the difference between "intelligent" and "dumped"
fixtures:

- intelligent (written by a human):
  :srcref:`polls/fixtures/demo.py
  <docs/tutorials/polls/fixtures/demo.py>`,

- dumped (generated by the `dumpdata` command):
  :srcref:`fixtures/a.py
  <docs/tutorials/polls/fixtures/a.py>`,
  

