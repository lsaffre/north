.. _north.tutorial.polls:

The North Polls tutorial 
=========================

This tutorial explains how North can be added to an 
existing Django site.

Before reading on, please follow the
`Django Polls tutorial
<https://docs.djangoproject.com/en/1.4/intro/tutorial01/>`_.

We are going to turn the resulting 
application into a North application.

Let's look together at the files under 
:file:`/docs/tutorials/polls` of the North code repository.
After the Django polls tutorial series,
we've added only a few minor things:

(1) In file `settings.py 
<http://code.google.com/p/django-north/source/browse/docs/tutorials/polls/mysite/settings.py>`_,
a line at the beginning of the file to instantiate our :setting:`SITE`::
::

    import north
    SITE = north.Site(globals()) 
    
A little bit more down we add a "djangosite" entry to 
:setting:`INSTALLED_APPS`::

  INSTALLED_APPS = (
      ...
      'djangosite'
  )
  
Note that "'djangosite'" must be the **last entry** of your 
:setting:`INSTALLED_APPS`. That's because the only thing it does 
is to call :meth:`settings.SITE.startup <djangosite.Site.startup>`

And finally we declare a local fixture directory::

  FIXTURE_DIRS = ['fixtures']


(2) A file `polls/fixtures/demo.py 
<http://code.google.com/p/django-north/source/browse/docs/tutorials/polls/polls/fixtures/demo.py>`_ ,
a simple example of a Python fixture providing 
demo data for our application:

.. literalinclude:: ../polls/fixtures/demo.py

You can now reset your database to factory defaults by issuing::

  python manage.py initdb demo
  
You can make a complete python backup like this::
  
  python manage.py dumpdata > fixtures/a.py
  
And restore it like this::

  python manage.py initdb a
 
Note the difference between "intelligent" and "dumped"
fixtures:

- An intelligent fixture is written by a human. 
  Example see our file :file:`polls/fixtures/demo.py` above.

- A dumped fixture is generated by the `dumpdata` command and looks much 
  less readable because it is optimized to allow automated database 
  migrations:
  `fixtures/a.py
  <http://code.google.com/p/django-north/source/browse/docs/tutorials/polls/fixtures/a.py>`_
  
  

